<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>Karte | Berlin-Vegan</title>
    <meta property="og:title" content="Berlin-Vegan-Karte" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.berlin-vegan.de/map/assets/images/og-image.jpg" />
    <meta property="og:url" content="https://www.berlin-vegan.de/map/" />
    <meta property="og:site_name" content="Berlin-Vegan" />
    <meta 
        name="description" 
        content="Mehr als 400 Restaurants, Cafés, Eiscafés und Imbisse in Berlin mit veganem Angebot.
            Sie lassen sich durchsuchen und auf einer Karte anzeigen.
            Teilweise sind Rezensionen verlinkt.
            More than 400 restaurants, cafes, ice cream shops and snack bars in Berlin with vegan offering.
            You can search them and display them on a map."
    >
    <meta 
        name="keywords" 
        content="
            berlin, vegan, vegetarisch, vegetarian, berlin-vegan, karte, map, suche, search, 
            verzeichnis, index, vegane angebote, vegan offerings, vegetarische angebote, vegetarian offerings, 
            gastronomie, gastronomiekarte, gastrokarte, locations, essen, food, trinken, drinks, 
            cafe, eiscafe, ice cream shop, imbiss, snack bar, restaurant
        "
    >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(.) styles/vendor.css -->
    <!-- endbuild -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
</head>
<body id="berlinVeganMapApp">
    <!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
      your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Add your site or application content here -->
    <div>
        <div ng-view=""></div>
    </div>

    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
              (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
              m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-1323925-1');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.min.js"></script>

    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:js({.tmp,app}) scripts/scripts.js -->
    <script src="scripts/app.js"></script>
    <script src="scripts/services/info_window_view.js"></script>
    <script src="scripts/services/resources.js"></script>
    <script src="scripts/services/i18n.js"></script>
    <script src="scripts/services/location_logic.js"></script>
    <script src="scripts/filters/location.js"></script>
    <script src="scripts/filters/kilometer.js"></script>
    <script src="scripts/controllers/main.js"></script>
    <!-- endbuild -->
    <script>
        // Set globals

        var global_language;

        if (location.href.indexOf("lang=") !== -1) {
            global_language = location.href.split("lang=")[1];
        } else if (localStorage) {
            global_language = localStorage.getItem("lang") || "de";
        } else {
            var prefLang = getPreferredSupportedLanguage();
            global_language = prefLang || "de";
        }

        var global_region = (global_language === "en") ? "us" : "de";

        function getPreferredSupportedLanguage() {
            var preferredLanguages = getPreferredLanguages();
            for (var i = 0; i < preferredLanguages.length; i++) {
                var lang = preferredLanguages[i];
                if (lang === "en" || lang === "de") {
                    return lang;
                }
            }
            return null;
        }

        function getPreferredLanguages() {
            var preferredLanguages;
            if (navigator.languages !== undefined) {
                // Firefox, Chrome, Opera
                preferredLanguages = navigator.languages;
            } else if (navigator.browserLanguage !== undefined) {
                // IE11
                preferredLanguages = [navigator.browserLanguage];
            } else {
                preferredLanguages = [];
            }
            return preferredLanguages.map(
                function(it) {
                    // Remove optional region
                    return it.indexOf("-") !== -1 ? it.split("-")[0] : it;
                }
            );
        }
    </script>
    <script>
        if (window.location.hostname !== "localhost" && window.location.protocol === "http:") {
            redirectToHttps();
        } else {
            appendScript(
                "https://maps.googleapis.com/maps/api/js?language=" + global_language +"&region=" + global_region,
                function() { angular.bootstrap(document.querySelector("#berlinVeganMapApp"), ["berlinVeganMapApp"]); }
            );
        }

        function redirectToHttps() {
            var httpsUrl = location.href.replace(/http:/, "https:");
            window.location.replace(httpsUrl);
        }

        function appendScript(url, onload) {
            var script = document.createElement('script');
            script.src = url;
            script.async = false;
            script.onload = onload;
            document.head.appendChild(script);
        }

        exports = {}; // Hack to be able to use libraries from the assets folder.
    </script>
    <!-- Hacky way to use index.js from https://github.com/marco-eckstein/js-common -->
    <script src="assets/lib/marco-eckstein-js-common-0.5.0.js"></script>
    </body>
</html>
